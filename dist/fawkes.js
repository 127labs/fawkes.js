!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Fawkes=t():e.Fawkes=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="/",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.createEvent$=function(){var e=[],t=[],n=function(n){if(t.length){var o=t.shift();o(n)}else e.push(n)},o=function(){return e.length?Promise.resolve(e.shift()):new Promise(function(e){return t.push(e)})};return{take:o,put:n}},o=t.createSocketEvent$=function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],o=n();return e.onOpen(function(){return o.put({type:e.endPoint+"/OPEN",connected:e.isConnected(),payload:e.endPoint})}),e.onClose(function(t){return o.put({type:e.endPoint+"/CLOSE",connected:e.isConnected(),payload:t})}),t&&e.onError(function(t){return o.put({type:e.endPoint+"/ERROR",connected:e.isConnected(),payload:t})}),o},r=t.createPushEvent$=function(e){var t=n();return e.receive("ok",function(n){return t.put({type:e.channel.topic+"/"+e.event,payload:n})}).receive("error",function(n){return t.put({type:e.channel.topic+"/"+e.event,payload:n})}).receive("timeout",function(){return t.put({type:e.channel.topic+"/"+e.event,payload:"Networking issue. Still waiting..."})}),t},u=t.createChannelEvent$=function(e,t){var o=n();return e.on(t,function(n){return o.put({type:e.topic+"/"+t,payload:n})}),e.onError(function(t){return o.put({type:e.topic+"/ERROR",payload:t})}),e.onClose(function(){return o.put({type:e.topic+"/CLOSE",payload:"The channel has gone away gracefully"})}),o};t["default"]={createEvent$:n,createSocketEvent$:o,createPushEvent$:r,createChannelEvent$:u}}])});